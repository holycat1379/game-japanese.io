{"version":3,"file":"Time-qz6JHFZ7.js","sources":["../../src/pages/Time.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useMediaControls } from '@vueuse/core'\nimport { ref } from 'vue'\n\nconst config = {\n  startIndex: 10,\n  endIndex: 18,\n}\nconst lessons = computed(() => {\n  return Array.from({ length: config.endIndex - config.startIndex + 1 }, (_, i) => {\n    return {\n      id: i + config.startIndex,\n      name: `第${i + config.startIndex}课`,\n      mp3: `japanese/mina-no-nihongo/${i + config.startIndex}.mp3`,\n      vtt: `japanese/mina-no-nihongo/${i + config.startIndex}.mp3.zh-CN-dual.vtt`,\n    }\n  })\n})\n\nconst currentLesson = reactive(lessons.value[0])\nconst video = ref()\nconst {\n  currentTime,\n  volume,\n  playing,\n  tracks,\n  duration,\n  enableTrack,\n} = useMediaControls(video, {\n  src: currentLesson.mp3,\n  tracks: [\n    {\n      default: true,\n      src: currentLesson.vtt,\n      kind: 'subtitles',\n      label: 'English',\n      srcLang: 'en',\n    },\n  ],\n})\n\nonMounted(() => {\n  volume.value = 0.5\n  currentTime.value = 0\n})\n\nwatchEffect(() => {\n  console.log(tracks.value[0])\n})\n\nfunction showcue() {\n  console.log(tracks.value[0].cues)\n}\n\n// Press space to toggle play/pause\nonKeyStroke(' ', (e) => {\n  console.log('space')\n  playing.value = !playing.value\n  e.preventDefault()\n})\n\n// 将所有class为box的元素全部用svg箭头链接起来\n// 思路：\n// 1. 获取所有class为box的元素\n// 2. 遍历每个元素，获取其相邻的元素\n// 3. 遍历每个元素的相邻元素，判断是否有class为box的元素\n// 4. 如果有，则用svg箭头链接起来\n// 5. 最后将所有svg箭头元素添加到页面上\nfunction addArrow() {\n  // 创建一个SVG元素\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.setAttribute('width', '100%')\n  svg.setAttribute('height', '100%')\n  svg.style.position = 'absolute'\n  svg.style.top = '0'\n  svg.style.left = '0'\n\n  // 创建一个箭头标记\n  const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker')\n  marker.setAttribute('id', 'arrow')\n  marker.setAttribute('markerWidth', '10')\n  marker.setAttribute('markerHeight', '10')\n  marker.setAttribute('refX', '8')\n  marker.setAttribute('refY', '3')\n  marker.setAttribute('orient', 'auto')\n  marker.setAttribute('markerUnits', 'strokeWidth')\n  const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n  path.setAttribute('d', 'M0,0 L0,6 L9,3 z')\n  path.setAttribute('fill', '#f00')\n  marker.appendChild(path)\n  svg.appendChild(marker)\n\n  // 获取所有class为box的元素\n  const boxes = document.querySelectorAll('.box')\n\n  // 遍历每个元素\n  boxes.forEach((box, index) => {\n    // 获取当前元素的下一个兄弟元素\n    const nextSibling = box.nextElementSibling\n\n    // 如果存在下一个兄弟元素，并且它有class为box的元素\n    if (nextSibling && nextSibling.classList.contains('box')) {\n      // 获取当前元素和下一个兄弟元素的位置信息\n      const rect1 = box.getBoundingClientRect()\n      const rect2 = nextSibling.getBoundingClientRect()\n\n      // 计算箭头路径的起始和结束点\n      let startX, startY, endX, endY\n      if (box.classList.contains('item-row-box')) {\n        startX = rect1.left + rect1.width\n        startY = rect1.top + rect1.height / 2\n      }\n      else if (box.classList.contains('item-column')) {\n        startX = rect1.left + rect1.width / 2\n        startY = rect1.top\n      }\n\n      if (nextSibling.classList.contains('item-row-box')) {\n        endX = rect2.left\n        endY = rect2.top + rect2.height / 2\n      }\n      else if (nextSibling.classList.contains('item-column')) {\n        endX = rect2.left + rect2.width / 2\n        endY = rect2.top + rect2.height\n      }\n\n      // 创建箭头路径\n      const arrowPath = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n      arrowPath.setAttribute('d', `M ${startX},${startY} L ${endX},${endY}`)\n      arrowPath.setAttribute('stroke', 'black')\n      arrowPath.setAttribute('stroke-width', '2')\n      arrowPath.setAttribute('marker-end', 'url(#arrow)')\n\n      // 将箭头路径添加到SVG元素中\n      svg.appendChild(arrowPath)\n    }\n  })\n\n  // 将SVG元素添加到页面上\n  document.body.appendChild(svg)\n}\n\nonMounted(() => {\n  addArrow()\n})\n\n// addArrow()\n</script>\n\n<template>\n  <div>\n    <!-- <iframe src=\"test-html/createReusableTemplate _ VueUse.html\" class=\"iframe\" /> -->\n    {{ currentLesson }}\n    <video ref=\"video\" />\n    <button v-for=\"track in tracks\" :key=\"track.id\" @click=\"enableTrack(track)\">\n      {{ track.cues }} }}\n    </button>\n\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"item-row\">\n          <div class=\"flex flex-row flex-wrap\" style=\"max-width: 500px;\">\n            <div class=\"item-row-box box\" />\n            <div class=\"item-row-box box\" />\n            <div class=\"item-row-box box\" />\n            <div class=\"item-row-box box\" />\n            <div class=\"item-row-box box\" />\n            <div class=\"item-row-box box\" />\n          </div>\n          <div class=\"column flex-wrap\" style=\"max-height: 500px;\">\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n          </div>\n        </div>\n        <div class=\"item-row\">\n          <div class=\"flex flex-row\">\n            <div class=\"box\" />\n            <div class=\"box\" />\n          </div>\n          <div class=\"column\">\n            <div class=\"item-column box\" />\n          </div>\n        </div>\n        <div class=\"item-row\">\n          <div class=\"flex flex-row\">\n            <div class=\"box\" />\n            <div class=\"box\" />\n            <div class=\"box\" />\n          </div>\n          <div class=\"column\">\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n            <div class=\"item-column box\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.box {\n  width: 100px;\n  height: 100px;\n  background-color: burlywood;\n  margin: 20px;\n}\n.container {\n  display: flex;\n  flex-direction: column;\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n}\n.column {\n  display: flex;\n  flex-direction: column;\n}\n\n.item-row {\n  min-width: 200px;\n  border: 1px solid #000;\n  padding: 20px;\n  text-align: center;\n}\n.item-column {\n  min-width: 200px;\n  border: 1px solid #000;\n  padding: 20px;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n}\n.iframe {\n  display: none;\n  width: 100vw;\n  height: 100vh;\n}\n</style>\n"],"names":["config","lessons","computed","_","i","currentLesson","reactive","video","ref","currentTime","volume","playing","tracks","duration","enableTrack","useMediaControls","onMounted","watchEffect","onKeyStroke","addArrow","svg","marker","path","box","index","nextSibling","rect1","rect2","startX","startY","endX","endY","arrowPath"],"mappings":"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"}