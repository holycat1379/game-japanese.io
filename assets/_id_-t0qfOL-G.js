import{d as M,D as E,l as x,r as w,g as N,E as R,G as S,h as V,w as z,H as T,o as l,a as u,b as r,n as j,v as A,u as a,F,i as q,e as h,B as G,C as H,t as p,q as $,p as K,k as U,_ as J}from"./index-t6yJiG68.js";const O=b=>(K("data-v-b8732558"),b=b(),U(),b),P={class:"absolute h-96 w-full"},Q=["onClick"],W={key:0,class:"absolute bottom-10 w-full flex justify-center"},X={key:0,"i-carbon-arrow-right":""},Y={key:1,"i-carbon-stop":""},Z={class:"fixed bottom-0 right-15 w-full flex justify-right"},ee=O(()=>r("div",{"i-carbon-settings":""},null,-1)),te=[ee],se={key:1,class:"absolute right-10 top-30 h-40 w-60 flex flex-col justify-right bg-dark-50 p-4"},ae=["max"],ne=M({__name:"[id]",setup(b){const D=E(),d={startIndex:10,endIndex:30},L=x(()=>Array.from({length:d.endIndex-d.startIndex+1},(e,s)=>({id:s+d.startIndex,name:`第${s+d.startIndex}课`,mp3:`/game-japanese.io/japanese/mina-no-nihongo/${s+d.startIndex}.mp3`,vtt:`/game-japanese.io/japanese/mina-no-nihongo/${s+d.startIndex}.mp3.zh-CN-dual.vtt`}))),c=w(L.value.find(e=>e.id===Number(D.params.id))),k=N(),{duration:C,currentTime:n,volume:B,playing:i,tracks:f}=R(k,{src:c.mp3,tracks:[{default:!0,src:c.vtt,kind:"subtitles",label:"English",srcLang:"en"}]}),o=w([]),y=x(()=>{if(f.value[0]&&f.value[0].cues){const e=f.value[0].cues,s=n.value;for(const t in e){const m=e[t];if(m.startTime<=s&&m.endTime>=s){o.splice(0,o.length),e[Number(t)-3]&&o.push(e[Number(t)-3]),e[Number(t)-2]&&o.push(e[Number(t)-2]),e[Number(t)-1]&&o.push(e[Number(t)-1]),o.push(e[t]),e[Number(t)+1]&&o.push(e[Number(t)+1]);break}}}return o}),g=S("lastCurrentTime",{});V(()=>{B.value=.5,n.value=0;const e=g.value[c.id];e?n.value=e:g.value[c.id]=0}),z(()=>n.value,()=>{g.value[c.id]=n.value}),T(" ",e=>{i.value=!i.value,e.preventDefault()}),T("ArrowRight",e=>{n.value=o.value[0].startTime,e.preventDefault()});const v=S("is-mobile",!1),_=N(!1),I=x(()=>v.value?{otherClass:"mb-5 cursor-pointer text-xs",currentClass:"text-1xl border-b border-light-50"}:{otherClass:"text-xs",currentClass:"border-b border-light-50"});return(e,s)=>(l(),u("div",null,[r("div",P,[j(r("div",null,[(l(!0),u(F,null,q(a(y),(t,m)=>(l(),u("div",{key:m,class:"mb-5 cursor-pointer",onClick:re=>n.value=t.startTime},[m===a(y).length-2?(l(),u("span",{key:0,class:$(a(I).currentClass)},p(t.text),3)):(l(),u("span",{key:1,class:$(a(I).otherClass)},p(t.text),3))],8,Q))),128)),r("video",{ref_key:"video",ref:k,class:"hidden"},null,512)],512),[[A,!a(i)]])]),a(v)?(l(),u("div",W,[r("button",{class:"border border-light-100 p-4",onClick:s[0]||(s[0]=t=>i.value=!a(i))},[a(i)?h("",!0):(l(),u("div",X)),a(i)?(l(),u("div",Y)):h("",!0)])])):h("",!0),r("div",Z,[r("button",{onClick:s[1]||(s[1]=t=>_.value=!_.value)},te)]),_.value?(l(),u("div",se,[j(r("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>H(n)?n.value=t:null),type:"range",name:"range",min:"0",max:a(C)},null,8,ae),[[G,a(n)]]),r("p",null," Start/duration: "+p(parseInt(a(n)/60))+" / "+p(parseInt(a(C)/60)),1),r("button",{class:"mt-4 border border-light-50",onClick:s[3]||(s[3]=t=>v.value=!a(v))},p(a(v)?"mobile":"pc"),1)])):h("",!0)]))}}),le=J(ne,[["__scopeId","data-v-b8732558"]]);export{le as default};
//# sourceMappingURL=_id_-t0qfOL-G.js.map
